{%load static%}

{% if  request.user.is_authenticated %}

{% if request.user.username != "sufian"  %}



<!DOCTYPE html>
<html lang="en">

<head>
    <title>Welcome to Hello Mistri </title>
    <!-- HTML5 Shim and Respond.js IE9 support of HTML5 elements and media queries -->
    <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
    <!--[if lt IE 9]>
      <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
      <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
      <![endif]-->
      <!-- Meta -->
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=0, minimal-ui">
      <meta http-equiv="X-UA-Compatible" content="IE=edge" />
      <meta name="description" content="CodedThemes">
      <meta name="keywords" content=" Admin , Responsive, Landing, Bootstrap, App, Template, Mobile, iOS, Android, apple, creative app">
      <meta name="author" content="CodedThemes">
      <meta name="viewport" content="width=device-width, initial-scale=1.0">
      <!-- Favicon icon -->
      <link rel="icon" href="{%static 'assets/images/favicon.ico' %}" type="image/x-icon">
      <!-- Google font-->
      <link href="https://fonts.googleapis.com/css?family=Open+Sans:400,600" rel="stylesheet">
      <!-- Required Fremwork -->
      <link rel="stylesheet" type="text/css" href="{%static 'assets/css/bootstrap/css/bootstrap.min.css' %}">
      <!-- themify-icons line icon -->
      <link rel="stylesheet" type="text/css" href="{%static 'assets/icon/themify-icons/themify-icons.css' %}">
      <!-- ico font -->
      <link rel="stylesheet" type="text/css" href="{%static 'assets/icon/icofont/css/icofont.css' %}">
      <!-- Style.css -->
      <link rel="stylesheet" type="text/css" href="{%static 'assets/css/style.css' %}">
      <link rel="stylesheet" type="text/css" href="{%static 'assets/css/jquery.mCustomScrollbar.css' %}">
      <script src="https://cdn.jsdelivr.net/gh/js-cookie/js-cookie@1.5.1/src/js.cookie.js"></script> 
      <script src="https://cdn.jsdelivr.net/gh/bfontaine/jquery-djangocsrf@0.1.1/jquery.djangocsrf.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
      <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/css/bootstrap.min.css">
      <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/css/bootstrap-select.css">
      <script src="https://cdnjs.cloudflare.com/ajax/libs/bootstrap-select/1.8.1/js/bootstrap-select.js"></script>
      <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.2.0/js/bootstrap.min.js"></script>  
      <script src="https://code.jquery.com/ui/1.12.1/jquery-ui.js"></script>
      

</head>


  <body>

     

    <!-- Pre-loader start -->

    <!-- Pre-loader end -->
    <div id="pcoded" class="pcoded">
        <div class="pcoded-overlay-box"></div>
        <div class="pcoded-container navbar-wrapper">

            <nav class="navbar header-navbar pcoded-header  bg-dark text-white">
                <div class="navbar-wrapper">

                    <div class="navbar-logo">
                        <a class="mobile-menu" id="mobile-collapse" href="#!">
                            <i class="ti-menu"></i>
                        </a>
                        <a class="mobile-search morphsearch-search" href="#">
                            <i class="ti-search"></i>
                        </a>
                        <a href="{% url 'dashboard'%} ">
                            <!-- <img class="img-fluid" alt="Theme-Logo" /> -->
                            <h6>Welcome to Hello Mistri</h6>
                        </a>
                        <a class="mobile-options">
                            <i class="ti-more"></i>
                        </a>
                    </div>

                    <div class="navbar-container container-fluid">
                        <ul class="nav-left">
                            <li>
                                <div class="sidebar_toggle"><a href="javascript:void(0)"><i class="ti-menu"></i></a></div>
                            </li>

                            <li>
                                <a href="#!" onclick="javascript:toggleFullScreen()">
                                    <i class="ti-fullscreen"></i>
                                </a>
                            </li>
                        </ul>
                        <ul class="nav-right">
                            <li class="header-notification">
                                <a href="#!">
                                    <i class="ti-bell text-white"></i>
                                    <span class="badge bg-c-pink"></span>
                                </a>
                                <ul class="show-notification">
                                    <li>
                                        <h6>Notifications</h6>
                                       <br><br>

                                        <!--  Section For Notification  -->
                                </ul>
                            </li>
                            <li class="user-profile header-notification ">
                                <a href="#!">
                                   {% for ass in backends.associated %}
                                            
                                        <img src="{{ass.extra_data.picture.data.url}}" class="img-radius" alt="User-Profile-Image">
                                  
                                    {% endfor %}
                                    <span id="user_name_clientservice" class ="text-white"> </span>
                                    <i class="ti-angle-down"></i>
                                </a>
                                <ul class="show-notification profile-notification">
                                    <!-- <li>
                                        <a href="#!">
                                            <i class="ti-settings"></i> Settings
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="ti-user"></i> Profile
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="ti-email"></i> My Messages
                                        </a>
                                    </li>
                                    <li>
                                        <a href="#">
                                            <i class="ti-lock"></i> Lock Screen
                                        </a>
                                    </li> -->
                                    <li>
                                        <a href="{% url 'logout'%}">
                                            <i class="ti-layout-sidebar-left"></i> Logout
                                        </a>
                                    </li>
                                </ul>
                            </li>
                        </ul>
                    </div>
                </div>
            </nav>
            <div class="pcoded-main-container bg-secondary">
                <div class="pcoded-wrapper">
                    <nav class="pcoded-navbar">
                        <div class="sidebar_toggle"><a href="#"><i class="icon-close icons"></i></a></div>
                        <div class="pcoded-inner-navbar main-menu">
                            <div class="">
                                <div class="main-menu-header">
                                  {% for ass in backends.associated %}
                                    <img class="img-40 img-radius" src="{{ass.extra_data.picture.data.url}}" alt="User-Profile-Image">
                                 {% endfor %}
                               
                                    <div class="user-details">
                                        <span id="user_name1_clientservice"></span>
                                        <span id="user_details_clientservice"><i class="ti-angle-down"></i></span>
                                    </div>
                                   
                                     
                                </div>

                            </div>
                            <div class="pcoded-search" >
                                <span class="searchbar-toggle">  </span>
                                {% comment %} <div class="pcoded-search-box ">
                                    <input type="text" placeholder="Search">
                                    <span class="search-icon"><i class="ti-search" aria-hidden="true"></i></span>
                                </div> {% endcomment %}
                            </div>
                            <div class="pcoded-navigatio-lavel " data-i18n="nav.category.navigation">information</div>
                            <ul class="pcoded-item pcoded-left-item ">
                                <li class="active">
                                    <a href="{% url 'dashboard'%}">
                                        <span class="pcoded-micon"><i class="ti-home"></i><b></b></span>
                                        <span class="pcoded-mtext" id="personal_information_clientservice" data-i18n="nav.dash.main"></span>
                                        <span class="pcoded-mcaret"></span>
                                    </a>
                                </li>
                            

                          <!--     Client Segment  Segment  -->
                        
                                  <li class="active">
                                    <a href="{%url 'client_service_select' %}" class="client_segment">
                                        <span class="pcoded-micon"><i class="ti-home"></i><b></b></span>
                                        <span class="pcoded-mtext" id="client_order_client_service" data-i18n="nav.dash.main"></span>
                                        <span class="pcoded-mcaret"></span>
                                    </a>
                                </li>

                                <li class="active" >
                                    <a href="" class="client_segment">
                                        <span class="pcoded-micon"><i class="ti-home"></i><b></b></span>
                                        <span class="pcoded-mtext" id="client_done_client_service" data-i18n="nav.dash.main"></span>
                                        <span class="pcoded-mcaret"></span>
                                    </a>
                                </li>

                                    <li class="active">
                                    <a href="index.html" class="client_segment">
                                        <span class="pcoded-micon"><i class="ti-home"></i><b></b></span>
                                        <span class="pcoded-mtext" id="client_pending_client_service" data-i18n="nav.dash.main"></span>
                                        <span class="pcoded-mcaret"></span>
                                    </a>
                                </li>
                           
                            </ul>
                            <!-- <div class="pcoded-navigatio-lavel" data-i18n="nav.category.forms">Forms &amp; Tables</div>
                        

                            <div class="pcoded-navigatio-lavel" data-i18n="nav.category.forms">Chart &amp; Maps</div>
                          

                            <div class="pcoded-navigatio-lavel" data-i18n="nav.category.other">Other</div> -->
                           
                        </div>
                    </nav>
      
              </div>

<!---          =============================== This is Div Section==========================                                        -->

              <br><br>
              <div class="pcoded-content  ">
                              <div class="pcoded-inner-content ">
      
                                  <!-- Main-body start -->
                                  <div class="main-body ">
                                      <div class="page-wrapper ">
                                      <!-- Page-header start -->
                                          <div class="page-body">
      
                                              <div class="row">
                                                  <div class="col-sm-12">
                                                      <!-- Typography card start -->
                                                      <div class="card">
                                                          <div class="card-header">
                      
                                                          <div class="card-header-right">   
                                                          <i class="icofont icofont-spinner-alt-5"></i>
                                                        </div>
                                                          </div>
                                                          <div class="card-block typography">
                                                              <div class="row">
                                                                  <div class="col-sm-12 col-xl-10">

   <!---          =============================== ========= This is Div Content Section==============================================                                        -->     
                                                               
                                                                 <div class="container">
                                                                        <div class="row">
                                                                          <div class="col-sm-3">
                                                                            <label for="cars"> সার্ভিস ক্যাটাগরি </label><br>
                                                                            <select class="form-control"  style="height:35px;width:230px;"  name="service" id="serviceGett">
                                                                                <option  selected  disabled hidden>Choose here</option>
                                                                                {% for data in service %}
                                                                                  <option value="{{data.service_name}}" data-id="{{data.id}}" >{{data.service_name}}</option>
                                                                                {% endfor %}
                                                                                </select>
                                                                          </div>

                                                                          <div class="col-sm-3">
                                                                            <label for="cars">  সার্ভিস </label><br>
                                                                            <select class="form-control"  style="height:35px;width:230px;"  name="sub_service" id="subService">
                                                                             <option  selected  disabled hidden>Choose here</option>
                                                                            </select>
                                                                           
                                                                           <br><br>
                                                                           
                                                                           <script>
                                                                           
                                                                           $(document).ready(function(){
                                                                           
                                                                           
                                                                              
                                                                           
                                                                             $.djangocsrf( "enable" );
                                                                               
                                                                             $("#serviceGett").change(function(){
       
                                                                                var control = $(this);
                                                                                var id = control.find(":selected").data("id");
                                                                                  var sub_service = "";
                                                                                $.ajax({
                                                                               
                                                                                 url:"{% url 'fetch_subservice' %}",
                                                                                 method:"POST",
                                                                                 data:{id:id},
                                                                                 success:function(data)
                                                                                 {  
                                                                                 
                                                                                     $("#subService").html("");
                                                                                      for(i=0;i<data.fetch_subservice.length;i++)
                                                                                       {
                                                                                          var   [name,id] = data.fetch_subservice[i];
                                                                                           sub_service += "<option value='"+name+"' data-id='"+id+"'>"+name+"</option>";      
                                                                                           
                                                                                     
                                                                                       } 
                                                                                  
                                                                                       console.log(sub_service);
                                                                                   
                                                                                  
                                                                                      $("#subService").html(sub_service);  
                                                                                      $('#subService').selectpicker('refresh');  
                                                                                      
                                                                                   }
                                                                                
                                                                                });
                                                                                
                                                                            
                                                                               
                                                                                
                                                                              });
                                                                           
                                                                           
                                                                           
                                                                           });
                                                                           
                                                                           
                                                                           
                                                                           </script>
                                                                       
                                                                        </div>

                                                                          <div class="col-sm-3">

                                                                            <label for="cars">  সার্ভিস ধরন </label><br>
                                                                            <select class="form-control"  style="height:35px;width:230px;"  name="sub_service_type" id="subServicetype">
                                                                                <option  selected  disabled hidden>Choose here</option>
                                                                            </select>
                                                                           
                                                                           <br><br>


                                                                           <script>
      
                                                                            $(document).ready(function(){
                                                                           
                                                                           
                                                                              
                                                                           
                                                                                $.djangocsrf( "enable" );
                                                                                  
                                                                                $("#subService").change(function(){

                                                                                   var control = $(this);
                                                                                   var id = control.find(":selected").data("id");
                                                                                     var sub_service_type = "";
                                                                                   $.ajax({
                                                                                  
                                                                                    url:"{% url 'fetch_servicetype' %}",
                                                                                    method:"POST",
                                                                                    data:{id:id},
                                                                                    success:function(data)
                                                                                    {  
                                                                                    
                                                                                        $("#subServicetype").html("");
                                                                                         for(i=0;i<data.fetch_servicetype.length;i++)
                                                                                          {
                                                                                             var   [name,id,rate] = data.fetch_servicetype[i];
                                                                                             sub_service_type += "<option value='"+rate+"' data-id='"+id+"'>"+name+"</option>";      
                                                                                              
                                                                                        
                                                                                          } 

                                                                                     
                                                                                         $("#subServicetype").html(sub_service_type);  
                                                                                         $('#subServicetype').selectpicker('refresh');  
                                                                                         
                                                                                      }
                                                                                   
                                                                                   });
                                                                                   
                                                                               
                                                                                  
                                                                                   
                                                                                 });
                                                                              
                                                                              
                                                                              
                                                                              });

                                                                           </script>

                                                                             {% for clientdata in client_data %}

                                                                                <input hidden id="client_city" value="{{clientdata.city}}">
                                                                                <input hidden id="client_area" value="{{ clientdata.area}}">
                                                                                <input hidden id="client_uid"  value="{{clientdata.uid}}"
        

                                                                             {% endfor %}
                                                                         
                                                                           </div>
                                                                         
                                                                   
                                                                        </div>
                                                                      </div>

                                                         <div class="container">
                                                              <div class="row">
                                                                <div class="col-sm-3">
                                                                  <label for="cars"> সময় নির্বাচন </label><br>
                                                                      <input type="datetime-local" id="datatimeevent" name="datatimeevent">
                                                              
                                                                  </div>
                                                               
                                                            </div><br>
                                                            <button class="btn-primary" id="add_que">ADD ORDER </button>
                                                        </div>
                                                     <br>
                                      
                                                        <table class="table table-borderless table-striped table-earning" id="table_id">
                                                            <thead>
                                                              <tr >
                                                                <th scope="col">ID</th>
                                                                <th scope="col">সার্ভিস ক্যাটাগরি</th>
                                                                <th scope="col">সার্ভিস</th>
                                                                <th scope="col">সার্ভিস ধরন</th>
                                                                <th scope="col">যে সময় নিতে চান</th>
                                                 
                                                              </tr>
                                                            </thead>
                                                            <tbody id="add_details">
                                                              
                                                               
                                                               
                                                        
                                                            </tbody>
                                                          </table>
                                                          

                                        <script>
                                        

                                         $(document).ready(function(){
                                           
                                            $("#add_que").click(function(){
                                                var service= $("#serviceGett").val();
                                                var subservice = $("#subService").val();
                                                var service_type = $("#subServicetype").text();
                                                var servcie_type_rate = $("#subServicetype").val();
                                                var datatimeevent = $("#datatimeevent").val();
                                                
                                               if(service =="" || subservice =="" || service_type ==""  || datatimeevent == "" )
                                               {
                                                     
                                                   alert("Fill Every Flied Please");

                                               }

                                               else{
                                                var  rowCount = document.getElementById('add_details').rows.length;  

                                                var table = document.getElementById("add_details");
                                                var row = table.insertRow(0)
                                               
                                                var x = row.insertCell(0);
                                                x.innerHTML = rowCount;

                                                var x = row.insertCell(1);
                                                x.innerHTML = service;

                                                var x = row.insertCell(2);
                                                x.innerHTML = subservice;

                                                var x = row.insertCell(3);
                                                x.innerHTML = service_type;

                                                var x =  row.insertCell(4);
                                                x.innerHTML = datatimeevent;
                                              
                                                var x = row.insertCell(5);
                                                x.innerHTML = "<button class='btn-primary table_row_click' name='table_row_click_name' id='table_row_"+rowCount+"' onclick='tablerowlclick();' >Submit </button>";

                                                var x = row.insertCell(6);
                                                x.innerHTML = servcie_type_rate;
                                                
                                                $("td:eq(6)").hide();

                                               }    


                                            })
                                       

                                         })
                                  
                                        </script>

                                     
<!-- 
                                    <script>

                                        function tablerowlclick(){

                                            alert(document.getElementById("table_id").tBodies[0].value);
                                                    
                                            var item = document.getElementById("table_id");

                                            
                                            var row = item;
                                  
                                            var row_value = "";
                              
                                            for (var j = 0; j < row.cells.length; j++) {
                              
                                                row_value += row.cells[j].innerHTML;
                                                row_value += " | ";
                                            }
                              
                                            alert(row_value);
                              
                                            // Toggle the highlight
                                           
                                          
                                        
                                        }


                                    </script> -->
                                    

                                    <script type="text/javascript">
  
                                        // JavaScript Code to Highlight any
                                        // row in the given table.
                                        document.getElementById('table_id').addEventListener('click',tablerowlclick )

                                              
                                      function tablerowlclick(item){
                                              console.log(item);
                                                var row = item.path[1];
                                  
                                                var row_value = [];
                                  
                                                for (var j = 0; j < row.cells.length; j++) {
                                  
                                                    row_value.push(row.cells[j].innerHTML);
                                                  
                                                   
                                                }

                                                var service =  row_value[1];
                                                var subservice = row_value[2];
                                                var servicetype = row_value[3];
                                                var servicetype_rate =row_value[6]
                                                var time = row_value[4]
                                                var client_city = $("#client_city").val();
                                                var client_area = $("#client_area").val();
                            
                                                var status = 3;
                                                {% for ass in backends.associated %}
                                            
                                                  var order_holder_pic = "{{ass.extra_data.picture.data.url | safe }}" ;
                                         
                                                {% endfor %}
                                                
                                                var post_data = {"service_name":service,"subservice_name":subservice,"service_type_rate":servicetype_rate,"service_type":servicetype,"status":status,"order_holder_pic":order_holder_pic,"time":time,"client_city":client_city,"client_area":client_area};
                                               
                                                $.ajax({
                                                                                  
                                                     url:"{% url 'submit_client_order' %}",
                                                     method:"POST",
                                                     data:post_data,
                                                    success:function(data)
                                                    {  

                                                       alert("Your Order Submitted Success");

                                              }
                                                                                 
                                          });
                                  
                                             

                                            }
                                            
                                              
                                    
                                        </script>



                                    
                                                          
                                              
<!---          =============================== ========= This is Div Content Section End==============================================                                        -->     
 </div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
                                                            

 
<!---          =============================== This is Div Section finish==========================                                        -->
                
                <div class="fixed-button">
                 
                </div>
             
            </div>
         
        </div>
    
  

<script type="text/javascript" src="{%static 'assets/js/jquery/jquery.min.js'%}"></script>
<script type="text/javascript" src="{%static 'assets/js/jquery-ui/jquery-ui.min.js'%}"></script>
<script type="text/javascript" src="{%static 'assets/js/popper.js/popper.min.js'%}"></script>
<script type="text/javascript" src="{%static 'assets/js/bootstrap/js/bootstrap.min.js'%}"></script>
<!-- jquery slimscroll js -->
<script type="text/javascript" src="{%static 'assets/js/jquery-slimscroll/jquery.slimscroll.js'%}"></script>
<!-- modernizr js -->
<script type="text/javascript" src="{% static 'assets/js/modernizr/modernizr.js'%}"></script>
<!-- am chart -->
<script src="{%static 'assets/pages/widget/amchart/amcharts.min.js'%}"></script>
<script src="assets/pages/widget/amchart/serial.min.js"></script>
<!-- Todo js -->
<script type="text/javascript " src="{%static 'assets/pages/todo/todo.js'%} "></script>
<!-- Custom js -->
<script type="text/javascript" src="{%static 'assets/pages/dashboard/custom-dashboard.js'%}"></script>
<script type="text/javascript" src="{%static 'assets/js/script.js'%}"></script>
<script type="text/javascript " src="{%static 'assets/js/SmoothScroll.js'%}"></script>
<script src="{%static 'assets/js/pcoded.min.js' %}"></script>
<script src="{%static 'assets/js/demo-12.js' %}"></script>
<script src="{%static 'assets/js/jquery.mCustomScrollbar.concat.min.js' %}"></script>
<!-- DJango Csrf javascript -->
<script src="https://cdn.jsdelivr.net/gh/js-cookie/js-cookie@1.5.1/src/js.cookie.js"></script>
<script src="https://cdn.jsdelivr.net/gh/bfontaine/jquery-djangocsrf@0.1.1/jquery.djangocsrf.js"></script>
<script>
var $window = $(window);
var nav = $('.fixed-button');
    $window.scroll(function(){
        if ($window.scrollTop() >= 200) {
         nav.addClass('active');
     }
     else {
         nav.removeClass('active');
     }
 });
</script>

<script>

    $(document).ready(function(){
  
   {% if not client_data and  not mistri_data  %} 
       
            $(location).attr('href',"{% url 'logout' %}");
             $(location).attr('href',"{% url 'dashboard' %}");
       
     
  {% endif %} 
  
  
     
      {% for evarage in client_data%}
  
         
              {%if user.social_auth.get.uid == evarage.uid %}
                 
                  {% if evarage.clint_id == "1"  %}
                     
                     $("#contact-form-mistri").hide();
                     $("#contact-form-client").show()
                     $(".mistri_segment").hide();
  
                     document.getElementById("user_details_clientservice").innerHTML = "Logine as Client";
                     document.getElementById("personal_information_clientservice").innerHTML = "আপনার তথ্য"; 
                     document.getElementById("user_name_clientservice").innerHTML = "{{evarage.name}}";
                     document.getElementById("user_name1_clientservice").innerHTML = "{{evarage.name}}";
  
  
  
  
                     // This Segment Use For Client information Show
                    // document.getElementById("client_uid").value = "{{evarage.uid}}";
                   //  document.getElementById("yourname1").value = "{{evarage.name}}";
                   //  document.getElementById("yourphone").value = "{{evarage.phone}}";
                   //  document.getElementById("address_client").value = "{{evarage.home_address}}";
  
  
  
                    document.getElementById("client_order_client_service").innerHTML = "ওয়ার্ডার করুন";
                    document.getElementById("client_done_client_service").innerHTML = "আপনার সম্পন্ন হওয়া কাজ";
                    document.getElementById("client_pending_client_service").innerHTML ="আপনার পেইন্ডিং কাজ";      
                    
                  
                     
                  {% endif %}
  
  
              {% endif %}
    
      
              
       {% endfor %} 
  
 
  
    
    
    });
  
  
  </script>
  

</body>

</html>

{% endif %}
{% endif %}




