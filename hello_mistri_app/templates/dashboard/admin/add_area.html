{% extends 'dashboard/admin/index.html' %}

{%load static%}


{% block body %}
<div class="pcoded-content  ">
    <div class="pcoded-inner-content ">

        <!-- Main-body start -->
        <div class="main-body ">
            <div class="page-wrapper ">
            <!-- Page-header start -->
                <div class="page-body">

                    <div class="row">
                        <div class="col-sm-12">
                            <!-- Typography card start -->
                            <div class="card">
                                <div class="card-header">

                                <div class="card-header-right">   
                                 <i class="icofont icofont-spinner-alt-5"></i>                                                         </div>
                                </div>
                                <div class="card-block typography">
                                    <div class="row">
                                        <div class="col-sm-12 col-xl-10">


 <style>
         .margin{
              margin-left: 80px;
            }

        
 </style> 

<form method="POST" id="add_data">
  <div class="form-group">
    <label for="usr">City</label>
     <input type="text" class="form-control"  name="city" id="usr">
  </div>
  <div class="form-group">
    <label for="usr">Area</label>
    <input type="text" class="form-control" name="area" id="usr">
  </div>
  <div class="form-group">
    <label for="usr">Sub Area</label>
    <input type="text" class="form-control"  name="subarea" id="usr">
  </div>
  <br>
  <div class="form-group">
         
    <button type="submit" class="btn btn-primary">Add</button>
  </div>
</form>



<button type="button" hidden id="success" class="btn btn-primary" data-toggle="modal" data-target="#exampleModalCenter">
</button>
<div class="modal fade " id="exampleModalCenter" tabindex="-1" role="dialog" aria-labelledby="exampleModalCenterTitle" aria-hidden="true">
  <div class="modal-dialog modal-dialog-centered bg-success" role="document">
    <div class="modal-content">
      <div class="modal-header">
        <h5 class="modal-title text-primary" id="exampleModalLongTitle">Status</h5>
        <button type="button" class="close" data-dismiss="modal" aria-label="Close">
          <span aria-hidden="true">&times;</span>
        </button>
      </div>
      <div class="modal-body text-primary" id="show_massage" >
      
      </div>
      
    </div>
  </div>
</div>




<table class="table">
  <thead>
    <tr>
      <th scope="col">id</th>
      <th scope="col">City</th>
      <th scope="col">Area</th>
      <th scope="col">SubArea</th>

    </tr>
  </thead>
<center><h2> Here  City List Client List </h2></center>
    {% for x in sub_area %}
  <tbody>

    <tr>
         <th scope="row">{{x.area_name.area_name.city_name}}</th>    
    </tr>

 
  </tbody> {% endfor %}
</table>



<script>
const form = document.getElementById("add_data");
  form.addEventListener("submit",submitHandler);

  function submitHandler(e)
  {
      e.preventDefault();
      $.djangocsrf( "enable" );
      $.ajax({
          type: "POST",
          url:"{%url 'add_area_request'%}",
          data:$("#add_data").serialize(),
          dataType:"json",
          success: function(data)
          {
              if(data.msg == "Success")
              {
                  
                  $(document).ready(function(){

                        $("#success").click();
                         document.getElementById("show_massage").innerHTML = "Data Save Successfully .. Do Refresh to See Changes";
                     })
                   
              }
              if(data.msg == "city")
              {
                  $(document).ready(function(){

                       $("#success").click(); 
                       document.getElementById("show_massage").innerHTML = "City Already Exist";
                  })
              }
             
          }
      })
  };




</script>





</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>
</div>




 {% endblock %}